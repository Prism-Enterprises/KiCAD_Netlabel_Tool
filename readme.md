# labelgen.py – KiCad Net Label Inserter

A lightweight Python utility to insert local or global net labels into a KiCad schematic (`.kicad_sch`) from a CSV file.

## Features

* **Interactive GUI** for configuration and file selection (Windows/macOS).
* **Imperial (mil) and Metric (mm)** unit support—default is mil.
* **Local or Global** net label option via checkbox—default is local.
* **Automatic backup** of the schematic (`.bak` saved alongside original).
* **Uppercases** all labels for consistency.
* **Direct file editing** using `kicad-skip`—no external APIs.

---

## Prerequisites

1. **Python 3.7+** on your `PATH`.
2. **pip** (comes with most Python installs).
3. **tkinter** (standard library GUI toolkit).
4. **kicad-skip** (auto‑installed if missing).

---

## Installation

1. **Place** `labelgen.py` in a folder **outside** your KiCad project root.
2. (Optional) Make it executable:

   ```bash
   chmod +x labelgen.py
   ```

---

## Usage

1. Run the script:

   ```bash
   python labelgen.py
   ```
2. A **Disclaimer** dialog appears:

   * Edits the native `.kicad_sch` file in place.
   * Creates a backup `*.bak` next to the original.
   * Recommended to run outside the project root.
   * Labels are placed outside the titleblock at top-left center.
   * **Click Yes** to continue, **No/Close** to cancel.
3. The **Settings & Files** dialog appears:

   * **Defaults**: mil units, local labels.
   * Check **Use metric units (mm)** to switch to millimeters.
   * Check **Use global labels** for global net labels.
   * **Browse** and select your `.kicad_sch` file.
   * **Browse** and select your `.csv` file (must contain a `Label` column).
   * Click **OK** to start insertion.
4. After processing, a summary shows how many labels were inserted.

---

## CSV Format

Your CSV must include a header named `Label` (case-insensitive). All other columns are ignored. Example data:

```csv
Pin Number,Pin Name,Label
PB0,PB0,RGMII_RXD2
PB1,PB1,RGMII_RXD3
PB3,PB3,RGMII_RXCTL
PB4,PB4,RGMII_TXD2
PB5,PB5,RGMII_TXD3
PB6,PB6,RGMII_GTXCLK
PB7,PB7,RGMII_GTXEN
```

Each entry in the **Label** column is automatically converted to uppercase and inserted as a net label in the schematic. For example, a CSV value of `rgmii_rxd2` becomes `RGMII_RXD2` in the schematic.

---

## Contributing

Contributions welcome! To contribute:

1. **Fork** this repository.
2. **Create** a branch: `git checkout -b feature/YourFeature`.
3. **Implement** your changes and commit: `git commit -m "Add feature X"`.
4. **Push** to your fork: `git push origin feature/YourFeature`.
5. **Open** a Pull Request describing your enhancement.

Please follow the existing style and update this README for any user-facing changes.

---

## License

This project is licensed under the **MIT License**. See [LICENSE](LICENSE) for details.

---

## Screenshots

1. **Terminal run**
   !\[Terminal]\(assets/img/Screenshot 2025-05-23 222632.png)

2. **Disclaimer dialog**
   !\[Disclaimer]\(assets/img/Screenshot 2025-05-23 222652.png)

3. **Settings dialog**
   !\[Settings]\(assets/img/Screenshot 2025-05-23 222729.png)

4. **Success message**
   !\[Success Message]\(assets/img/Screenshot 2025-05-23 222740.png)

5. **Labels in schematic**
   !\[Schematic Labels]\(assets/img/Screenshot 2025-05-23 222850.png)

## Changelog

### v1.1  (2025‑05‑23)

* Added **global‑label** support (checkbox now inserts *only* global labels when selected).
* Removed custom X/Y inputs; labels start at **–10 mm, –10 mm** by default.
* Default pitch set to **100 mil** (imperial) or **2 mm** (metric). Pitch remains editable.
* File‑path fields now show selected schematic/CSV immediately.
* README updated with clarified defaults and CSV example.

### v1.0  (2025‑02‑05)

* Initial public release with local net‑label insertion from CSV.

---

*Generated by Prism Enterprise LLC*
